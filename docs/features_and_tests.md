# ğŸ§ª Feature overview (from unit tests)

> Generated by `tests â†’ features` bot  
> Commit: `0df888ea5020c6fe4f133090eba75d3141c54284` Â· Updated: `2026-01-11T04:25:39Z`

---

## ğŸ“¦ Projects

- **tempybot**
- **@tempybot/stc**

---

## âœ… Features inferred from unit tests

### tempybot

| Feature | What is tested | Behaviors covered | Evidence (tests) | Confidence |
|---|---|---|---|:--:|
| **Agent template parser (`agentTemplateToJson`)** | Parses `.agent.md` into a normalized `AgentDefinition` with policy fallbacks and validations | defaults Â· validation Â· conflicts/errors | `tests/unit/agent/parse-agent-md.test.ts` | ğŸŸ¢ |
| **MCP server config in frontmatter (`mcpServers`)** | YAML `mcpServers` parsing, including args/env/cwd and malformed inputs | happy path Â· validation Â· errors | `tests/unit/agent/parse-agent-md.test.ts` | ğŸŸ¢ |
| **Claude-style commands section parsing** | `## Commands` + per-command frontmatter parsing into `commands[]` | happy path Â· parsing Â· structure | `tests/unit/agent/parse-agent-md.test.ts` | ğŸŸ¡ |
| **Agent file parsing (`parseAgentMd`)** | Reads a file path and returns parsed `AgentDefinition` | happy path Â· file I/O | `tests/unit/agent/parse-agent-md.test.ts` | ğŸŸ¡ |
| **Compile example agents to deterministic JSON** | `docs/agent-examples/*.agent.md` â†’ JSON files + `manifest.json` + `report.md` with stable output | determinism Â· schema shape Â· roundtrip | `tests/unit/agent/compile-agent-examples.test.ts` | ğŸŸ¡ |
| **`tempybot` CLI: `parse` command** | Prints JSON to stdout, supports `--out`, returns distinct exit codes for usage vs parse errors | happy path Â· file output Â· errors | `tests/unit/cli.agent-parse.test.ts` | ğŸŸ¢ |
| **`agnet.ts` CLI: `doctor`** | Emits JSON with template list/count and success status | happy path Â· reporting | `tests/unit/agnet-cli.test.ts` | ğŸŸ¡ |
| **`agnet.ts` CLI: `run --world` command detection + idempotency** | Finds `/myagent â€¦` commands in issue comments fixtures and prevents rerun for same comment id | detection Â· idempotency Â· fixtures | `tests/unit/agnet-cli.test.ts` | ğŸŸ¢ |
| **`agnet.ts` CLI: tool wrappers (`gh`, `mcp call`)** | Uses fixture mode (no real `gh` / no network MCP) and surfaces deterministic outputs | happy path Â· fixtures Â· errors | `tests/unit/agnet-cli.test.ts` | ğŸŸ¢ |
| **`agnet.ts` CLI: resolve workflow (success + failure)** | Posts acknowledgement/final summary comments, starts Cursor job via MCP fixture, and posts failure on Cursor error | workflow Â· logging Â· error handling | `tests/unit/agnet-cli.test.ts` | ğŸŸ¢ |
| **`hello()` greeting** | Default greeting and named greeting | happy path Â· input parameter | `tests/unit/hello.test.ts` | ğŸŸ¢ |

---

### @tempybot/stc

| Feature | What is tested | Behaviors covered | Evidence (tests) | Confidence |
|---|---|---|---|:--:|
| **In-memory channels** | Capability enforcement (`canRead`/`canWrite`), abort-driven unsubscribe, idempotent close | validation Â· lifecycle Â· edge cases | `tests/unit/stc/light/channel.test.ts` | ğŸŸ¢ |
| **In-memory chat** | Monotonic sequencing, newest-first fetch, and before-cursor pagination | ordering Â· pagination Â· limits | `tests/unit/stc/light/chat.test.ts` | ğŸŸ¢ |
| **In-memory collections (flat + tree)** | Upsert semantics, key inference via `keyField`, missing-key errors, and parent/child navigation | happy path Â· validation Â· relationships | `tests/unit/stc/light/collection.test.ts` | ğŸŸ¢ |

Legend: ğŸŸ¢ high Â· ğŸŸ¡ medium Â· ğŸ”´ low confidence

---

## âŒ Features detected without unit tests

### tempybot

| Feature (untested) | Why bot thinks it exists | Evidence (code/docs) | Suggested test |
|---|---|---|---|
| **Scenario demo HTTP server (`startServer`)** | exported runtime function; used to serve `/auth` + hello pages | `src/server.ts:174-206` | route behavior + HTML assertions |
| **MCP JSON-RPC stdio client (`McpStdioClient`)** | exported client with request/notify and process lifecycle handling | `src/agnet/mcp-stdio-client.ts:30-104` | request/response correlation + exit handling |
| **Environment self-check runner (`runSelfCheck`)** | exported workflow validating Cursor/GitHub/MCP prerequisites | `src/agnet/self-check.ts:341-366` | â€œrequired vs optionalâ€ outcomes + fixture-based MCP |

---

### @tempybot/stc

| Feature (untested) | Why bot thinks it exists | Evidence (code/docs) | Suggested test |
|---|---|---|---|
| **Transport client/factory (`LocalTransportClient`, `DefaultTransportFactory`)** | exported transport layer with error wrapping + channel opening | `src/stc/light/transport.ts:17-89` | call() success + call() error origin + dispose behavior |
| **Workbench/module runtime (`module`, `activate`)** | exported schema-driven module activation framework | `src/stc/light/workbench.ts:325-383` | schema registration + dispose cleanup + caching |

---

## ğŸ“Š Quick stats

| Project | Features (tested) | Features (untested) | Test files |
|---|---:|---:|---:|
| tempybot | 11 | 3 | 5 |
| @tempybot/stc | 3 | 2 | 3 |
| **Total** | 14 | 5 | 8 |

